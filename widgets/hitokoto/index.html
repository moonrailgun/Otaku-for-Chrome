<style>
#hitokoto{
  padding: 20px 6px;
}
#hitokoto .text {
    font-size: 30px;
    /*color: white;*/
    line-height: 1em;
    font-family: 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;
}
#hitokoto .hitokoto{
  text-align: center;
  width: 90%;
  margin-top: -40px;
}
</style>

<div id="hitokoto">
  <p style="text-align:left" class="text">『</p>
  <!-- <h3 class="hitokoto"></h3> -->
  <center><p class="hitokoto text"></p></center>
  <p style="text-align:right;margin-top:-40px" class="text">』</p>
  <p style="text-align:right" class="text_author">-「<span class="from"></span>」</p>
  <!-- <p class="from"></p> -->
</div>

<script>
$(function(){
  var saveLastData = function(data){
    var temp = Core.widgetSettings.get("hitokoto") || {};
    temp.lastData = data
    Core.widgetSettings.set("hitokoto",temp);
  }
  var updateData = function(data){
    $('#hitokoto .hitokoto').text(data.hitokoto);
    $('#hitokoto .from').text(data.from);
  }
  var settings = Core.widgetSettings.get("hitokoto");
  if(settings){
    updateData(settings.lastData);
  }

  var url = 'http://api.hitokoto.cn/';
  $.getJSON(url, function(json, textStatus) {
    var data = {
      hitokoto:json.hitokoto,
      from: json.from
    }
    updateData(data);
    saveLastData(data);
  });
})
</script>
